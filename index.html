<!DOCTYPE html>
<html lang="uk">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ü—ñ—Ü–µ—Ä—ñ—è & –°—É—à—ñ-–ë–∞—Ä "FoodMix"</title>
<style>
body {
  font-family: "Arial", sans-serif;
  background-color: #fff5e6;
  margin: 0;
  padding: 0;
}
header {
  background-color: #ff9933;
  color: white;
  padding: 20px;
  text-align: center;
  font-size: 28px;
  font-weight: bold;
}
nav {
  display: flex;
  justify-content: center;
  background-color: #ffcc80;
  padding: 10px 0;
  flex-wrap: wrap;
}
nav button {
  background-color: #ff9933;
  color: white;
  border: none;
  margin: 5px;
  padding: 10px 20px;
  border-radius: 8px;
  font-size: 16px;
  cursor: pointer;
}
nav button:hover {
  background-color: #ff6600;
}
main {
  display: flex;
  justify-content: space-between;
  padding: 20px;
  flex-wrap: wrap;
}
#menu {
  width: 60%;
}
.category {
  background-color: #ffe0b3;
  padding: 15px;
  border-radius: 10px;
  margin-bottom: 20px;
}
.item {
  display: flex;
  justify-content: space-between;
  background-color: white;
  margin: 5px 0;
  padding: 10px;
  border-radius: 6px;
}
.item button {
  background-color: #ff9933;
  color: white;
  border: none;
  border-radius: 5px;
  padding: 6px 12px;
  cursor: pointer;
}
.item button:hover {
  background-color: #ff6600;
}
#cart {
  width: 35%;
  background-color: white;
  padding: 20px;
  border-radius: 10px;
}
#cart h2 {
  text-align: center;
}
#cart ul {
  list-style-type: none;
  padding: 0;
}
#cart li {
  background-color: #fff5e6;
  margin: 5px 0;
  padding: 8px;
  border-radius: 5px;
  display: flex;
  justify-content: space-between;
  align-items: center;
}
.remove-btn {
  background-color: #ff3333;
  color: white;
  border: none;
  border-radius: 5px;
  padding: 5px 8px;
  cursor: pointer;
}
.remove-btn:hover {
  background-color: #cc0000;
}
button.pay {
  width: 100%;
  margin-top: 10px;
  font-size: 18px;
  border-radius: 8px;
  padding: 12px;
}
#receipt {
  display: none;
  background-color: white;
  padding: 20px;
  margin: 20px;
  border-radius: 10px;
  text-align: center;
}
#qrcode {
  margin-top: 10px;
}
.download-btn {
  background-color: #007bff;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  margin-top: 10px;
}
.download-btn:hover {
  background-color: #0056b3;
}
</style>
</head>
<body>
<header>üçï –ü—ñ—Ü–µ—Ä—ñ—è & –°—É—à—ñ-–ë–∞—Ä "FoodMix" üç£üçî</header>

<nav>
  <button onclick="showCategory('pizza')">–ü—ñ—Ü–∞</button>
  <button onclick="showCategory('sushi')">–°—É—à—ñ</button>
  <button onclick="showCategory('burgers')">–ë—É—Ä–≥–µ—Ä–∏</button>
  <button onclick="showCategory('drinks')">–ù–∞–ø–æ—ó</button>
  <button onclick="clearCart()">üóë –û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫</button>
</nav>

<main>
  <section id="menu"></section>
  <section id="cart">
    <h2>üõí –í–∞—à –∫–æ—à–∏–∫</h2>
    <ul id="cartList"></ul>
    <h3 id="total">–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: 0 –≥—Ä–Ω</h3>
    <button class="pay" style="background:#3399ff;color:white" onclick="pay('–ö–∞—Ä—Ç–∞')">üí≥ –û–ø–ª–∞—Ç–∏—Ç–∏ –∫–∞—Ä—Ç–æ—é</button>
    <button class="pay" style="background:#33cc33;color:white" onclick="pay('–ì–æ—Ç—ñ–≤–∫–∞')">üíµ –û–ø–ª–∞—Ç–∏—Ç–∏ –≥–æ—Ç—ñ–≤–∫–æ—é</button>
  </section>
</main>

<section id="receipt">
  <div id="receiptText"></div>
  <div id="qrcode"></div>
  <button class="download-btn" onclick="downloadPDF()">‚¨áÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —á–µ–∫ (PDF)</button>
</section>

<!-- –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫ -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<script>
const menuData = {
  pizza: {
    "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞": 180, "–ü–µ–ø–µ—Ä–æ–Ω—ñ": 220, "4 –°–∏—Ä–∏": 250, "–ì–∞–≤–∞–π—Å—å–∫–∞": 200,
    "–ö–∞—Ä–±–æ–Ω–∞—Ä–∞": 230, "–î—ñ–∞–±–ª–æ": 240, "–ë–∞—Ä–±–µ–∫—é": 260, "–í–µ–≥–µ—Ç–∞—Ä—ñ–∞–Ω—Å—å–∫–∞": 210
  },
  sushi: {
    "–§—ñ–ª–∞–¥–µ–ª—å—Ñ—ñ—è": 210, "–ö–∞–ª—ñ—Ñ–æ—Ä–Ω—ñ—è": 200, "–î—Ä–∞–∫–æ–Ω": 240, "–°–µ—Ç –Ü–º–ø–µ—Ä–∞—Ç–æ—Ä": 420,
    "–°–µ—Ç –°–∞–º—É—Ä–∞–π": 350, "–°–µ—Ç –¢–æ–∫—ñ–æ": 360, "–°–µ—Ç –ö—ñ–æ—Ç–æ": 400, "–°–µ—Ç –ú–æ—Ä—Å—å–∫–∏–π": 430,
    "–°–µ—Ç –ì–µ–π—à–∞": 370, "–°–µ—Ç –°–∞–∫—É—Ä–∞": 390, "–°–µ—Ç –ö–ª–∞—Å—ñ–∫": 410, "–°–µ—Ç –ë–ª–∞–∫–∏—Ç–Ω–∏–π –æ–∫–µ–∞–Ω": 450
  },
  burgers: {
    "–ß—ñ–∑–±—É—Ä–≥–µ—Ä": 150, "–î–∞–±–ª –ß—ñ–∑–±—É—Ä–≥–µ—Ä": 200, "–ë–µ–∫–æ–Ω –ë—É—Ä–≥–µ—Ä": 220,
    "–ö—É—Ä—è—á–∏–π –ë—É—Ä–≥–µ—Ä": 180, "BBQ –ë—É—Ä–≥–µ—Ä": 230, "–§—ñ—à –ë—É—Ä–≥–µ—Ä": 190
  },
  drinks: {
    "–ö–æ–ª–∞ 0.5–ª": 40, "–§–∞–Ω—Ç–∞ 0.5–ª": 40, "–°—ñ–∫ –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤–∏–π": 45, "–í–æ–¥–∞": 30, "–ï–Ω–µ—Ä–≥–µ—Ç–∏–∫": 55
  }
};

let cart = JSON.parse(localStorage.getItem("cart")) || {};

function showCategory(cat) {
  const menu = document.getElementById("menu");
  menu.innerHTML = "";
  const block = document.createElement("div");
  block.className = "category";
  block.innerHTML = `<h2>${cat.charAt(0).toUpperCase() + cat.slice(1)}</h2>`;
  for (let item in menuData[cat]) {
    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `<span>${item} ‚Äî ${menuData[cat][item]} –≥—Ä–Ω</span>
                     <button onclick="addToCart('${item}', ${menuData[cat][item]})">–î–æ–¥–∞—Ç–∏</button>`;
    block.appendChild(div);
  }
  menu.appendChild(block);
}

function addToCart(name, price) {
  if (!cart[name]) cart[name] = {price: price, quantity: 1};
  else cart[name].quantity++;
  saveCart();
  updateCart();
}

function removeFromCart(name) {
  if (cart[name]) {
    cart[name].quantity--;
    if (cart[name].quantity <= 0) delete cart[name];
    saveCart();
    updateCart();
  }
}

function clearCart() {
  if (confirm("–û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫?")) {
    cart = {};
    saveCart();
    updateCart();
  }
}

function updateCart() {
  const list = document.getElementById("cartList");
  const totalEl = document.getElementById("total");
  list.innerHTML = "";
  let total = 0;
  for (let item in cart) {
    const li = document.createElement("li");
    const line = `${item} (${cart[item].quantity} —à—Ç.) ‚Äî ${cart[item].price * cart[item].quantity} –≥—Ä–Ω`;
    const btn = document.createElement("button");
    btn.textContent = "‚ùå";
    btn.className = "remove-btn";
    btn.onclick = () => removeFromCart(item);
    li.textContent = line;
    li.appendChild(btn);
    list.appendChild(li);
    total += cart[item].price * cart[item].quantity;
  }
  totalEl.textContent = "–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞: " + total + " –≥—Ä–Ω";
}

function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
}

function pay(method) {
  if (Object.keys(cart).length === 0) {
    alert("–í–∞—à –∫–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!");
    return;
  }
  const total = Object.values(cart).reduce((sum, i) => sum + i.price * i.quantity, 0);
  const tax = (total * 0.07).toFixed(2);
  const grandTotal = (total + parseFloat(tax)).toFixed(2);
  const orderId = Math.floor(Math.random() * 900000 + 100000);
  const fiscal = Math.floor(Math.random() * 900000000 + 100000000);
  const receiptData = {
    orderId,
    fiscal,
    method,
    total,
    tax,
    grandTotal,
    date: new Date().toLocaleString(),
  };
  let text = `<h2>–ï–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∏–π —á–µ–∫</h2>
  <p><strong>–ü—ñ—Ü–µ—Ä—ñ—è & –°—É—à—ñ-–ë–∞—Ä "FoodMix"</strong></p>
  <p>–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è ‚Ññ${orderId}</p><hr>`;
  for (let i in cart) {
    text += `<p>${i} ‚Äî ${cart[i].quantity} x ${cart[i].price} = ${cart[i].price * cart[i].quantity} –≥—Ä–Ω</p>`;
  }
  text += `<hr><p>–ü–î–í: ${tax} –≥—Ä–Ω</p>
           <p><strong>–î–æ —Å–ø–ª–∞—Ç–∏: ${grandTotal} –≥—Ä–Ω</strong></p>
           <p>–û–ø–ª–∞—Ç–∞: ${method}</p>
           <p>–§—ñ—Å–∫–∞–ª—å–Ω–∏–π —á–µ–∫ ‚Ññ${fiscal}</p>
           <p>–î–∞—Ç–∞: ${receiptData.date}</p>
           <p>–î—è–∫—É—î–º–æ, —â–æ –æ–±—Ä–∞–ª–∏ –Ω–∞—Å! üçïüç£üçî</p>`;
  document.getElementById("receiptText").innerHTML = text;
  document.getElementById("receipt").style.display = "block";
  document.getElementById("qrcode").innerHTML = "";
  new QRCode(document.getElementById("qrcode"), {
    text: JSON.stringify(receiptData),
    width: 150,
    height: 150
  });
  cart = {};
  saveCart();
  updateCart();
}

function downloadPDF() {
  const element = document.getElementById("receipt");
  const opt = {
    margin: 0.5,
    filename: 'FoodMix_–ß–µ–∫.pdf',
    image: { type: 'jpeg', quality: 0.98 },
    html2canvas: { scale: 2 },
    jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
  };
  html2pdf().set(opt).from(element).save();
}

showCategory('pizza');
updateCart();
</script>
</body>
</html>
